<div class="card card-default vbox">
    <div class="card-header">
        <label style="flex: 1">Versions:</label>

        <div class="btn-group btn-group-xs" style="margin-right: 5px">
            <button class="btn btn-light" (click)="swithcToVersion()" [disabled]="!selectedVersion">
                Switch to
            </button>
            <!-- <button class="btn btn-light" (click)="deleteVersion()" [disabled]="!selectedVersion">
                Delete
            </button> -->
        </div>

        <div class="dropdown float-right" ngbDropdown>
            <button class="btn btn-xs btn-light dropdown-toggle" data-toggle="dropdown" [disabled]="!isDumpAuthorized" ngbDropdownToggle>
                Dump...
                <span class="fas fa-caret-down fa-sm"></span>
            </button>
            <div class="dropdown-menu" ngbDropdownMenu>
                <a class="dropdown-item" (click)="dump()">Dump a new version</a>
                <a class="dropdown-item" (click)="dumpWithLocation()">Dump a new version to a different location</a>
            </div>
        </div>

    </div>

    <div class="card-body scrollableContainer" style="flex: 1;">
        <table class="table table-sm table-hoverable" style="flex: 1">
            <thead>
                <tr>
                    <th class="text-center">Version ID</th>
                    <th class="text-center">Datetime</th>
                    <th class="text-center">Repository ID</th>
                    <th class="text-center">Repo Location</th>
                    <th class="text-center">Active</th>
                    <th class="text-center">Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let v of versionList; let idx=index" (click)="selectVersion(v)" [ngClass]="{ 'table-primary': v == selectedVersion }">
                    <td class="text-center">
                        {{v.versionId}}
                    </td>
                    <td class="text-center">
                        {{v.dateTimeLocal}}
                    </td>
                    <td class="text-center">
                        {{v.repositoryId}}
                    </td>
                    <td class="text-center">
                        {{v.repositoryLocation}}
                    </td>
                    <td class="text-center">
                        <span *ngIf="isActiveVersion(v)" class="fas fa-check"></span>
                    </td>
                    <td class="text-center">
                        <ng-container *ngIf="idx == 0">
                            ---
                        </ng-container>
                        <ng-container *ngIf="idx > 0">
                            {{v.repositoryStatus | lowercase}}
                            <button class="btn btn-xs btn-light" (click)="closeVersion(v)"
                                [disabled]="v.repositoryStatus != 'INITIALIZED' || isActiveVersion(v)">
                                Close
                            </button>
                        </ng-container>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
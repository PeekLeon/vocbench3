
<div class="card card-default vbox">
    <div class="card-body hbox">

        <div class="card card-default vbox" style="margin-right: 4px;">
            <div class="card-header">
                <label>Resource Types</label>
            </div>
            <div class="card-body scrollableContainer">
                <div *ngFor="let rps of rolePartitionsStructs" class="listItem" (click)="selectRolePartitionsStruct(rps)"
                    [ngClass]="{ active: rps == selectedRolePartitionsStruct }">
                    {{rps.role.show}}
                </div>
            </div>
        </div>

        <div class="card card-default vbox">
            <div class="card-header">
                <label style="flex: 1;">Partitions</label>
                <div class="btn-toolbar" role="toolbar">
                    <div class="btn-group btn-group-xs" role="group">
                        <button class="btn btn-light" (click)="checkAll(selectedRolePartitionsStruct, true)" title="Check all">
                            <span class="far fa-check-square"></span>
                        </button>
                        <button class="btn btn-light" (click)="checkAll(selectedRolePartitionsStruct, false)" title="Uncheck all">
                            <span class="far fa-square"></span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="card-body scrollableContainer">
                <div *ngFor="let partition of selectedRolePartitionsStruct?.partitions" class="listItem">
                    <input type="checkbox" [(ngModel)]="partition.checked" (ngModelChange)="updatePref()">
                    <span style="flex: 1; margin-left: 4px">{{partition.labelTranslationKey|translate}}</span>
                    <span *ngIf="partition.checked" class="fas fa-eye"></span>
                    <span *ngIf="!partition.checked" class="fas fa-eye-slash"></span>
                    
                    <div class="dropdown float-right" ngbDropdown>
                        <button class="dropdown-toggle transparentBtn" data-toggle="dropdown" ngbDropdownToggle>
                            <span class="fas fa-caret-down fa-sm"></span>
                        </button>
                        <div class="dropdown-menu" ngbDropdownMenu>
                            <a class="dropdown-item" (click)="checkForAllRoles(partition.id, true)">
                                <span class="fas fa-eye" style="margin-right: 4px;"></span>Set visible for all resource types
                            </a>
                            <a class="dropdown-item" (click)="checkForAllRoles(partition.id, false)">
                                <span class="fas fa-eye-slash" style="margin-right: 4px;"></span>Hide for all resource types
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="card-footer">
        <button class="btn btn-xs btn-light float-right" (click)="reset()" title="Set visible all the partitions of all the Resource types">
            <span class="fas fa-eye"></span>
            Enable all
        </button>
    </div>
</div>
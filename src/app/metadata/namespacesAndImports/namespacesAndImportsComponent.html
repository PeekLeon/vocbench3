<div class="hbox">

    <div class="vbox">

        <!-- Namespace management -->
        <div class="card card-default vbox">
            <div class="card-header">
                <label style="flex: 1">Namespace management:</label>
                <div class="btn-group btn-group-xs" role="group">
                    <button class="btn btn-light" title="Add mapping" (click)="addMapping()" [disabled]="!isAddNsPrefixMappingAuthorized()">
                        <span class="fas fa-plus"></span>
                    </button>
                    <button class="btn btn-light" title="Remove mapping" (click)="removeMapping()"
                        [disabled]="!selectedMapping || !selectedMapping.explicit || !isRemoveNsPrefixMappingAuthorized()">
                        <span class="fas fa-minus"></span>
                    </button>
                    <button class="btn btn-light" title="Change prefix" (click)="changeMapping()"
                        [disabled]="!selectedMapping || !isChangeNsPrefixMappingAuthorized()">
                        <span class="fas fa-pencil-alt"></span>
                    </button>
                </div>
            </div>
            <div class="card-body vbox">
                
                <div class="card card-default" style="margin: 4px">
                    <div class="card-body">
                        <table class="table table-sm table-borderless">
                            <colgroup>
                                <col style="width: 1%;">
                                <col>
                                <col style="width: 1%;">
                            </colgroup>
                            <tbody>
                                <tr>
                                    <td><label>BaseURI:</label></td>
                                    <td>
                                        <input type="text" class="form-control input-xs"
                                            [ngClass]="{ submitted:nsBaseURISubmitted, 'ng-invalid':!isBaseURIValid() }" [ngModel]="baseURI"
                                            (ngModelChange)="onBaseURIChanged($event)" [disabled]="!isBaseuriNsEditAuthorized()">
                                    </td>
                                    <td rowspan="2">
                                        <div class="btn-group-vertical">
                                            <button class="btn btn-light" [ngClass]="{active: bind}" title="Bind/unbind namespace and baseURI"
                                                (click)="bindNamespaceBaseURI()">
                                                <span class="fas fa-link"></span>
                                            </button>
                                            <button class="btn btn-light" title="Apply namespace baseURI changes"
                                                [ngClass]="{'btn-primary': areNamespaceBaseURIChanged(), 'btn-light': !areNamespaceBaseURIChanged()}"
                                                (click)="applyNamespaceBaseURI()" [disabled]="!areNamespaceBaseURIChanged() || !isBaseuriNsEditAuthorized()">
                                                <span class="fas fa-check"></span>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td><label>Namespace:</label></td>
                                    <td>
                                        <input type="text" class="form-control input-xs"
                                            [ngClass]="{ submitted:nsBaseURISubmitted, 'ng-invalid':!isNamespaceValid() }" [ngModel]="namespace"
                                            (ngModelChange)="onNamespaceChanged($event)" [disabled]="!isBaseuriNsEditAuthorized()" >
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div class="scrollableContainer">
                    <table class="table table-sm table-striped table-hoverable">
                        <thead>
                            <tr>
                                <th class="text-center">Prefix</th>
                                <th class="text-center">Namespace</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let m of nsPrefMappingList" (click)="selectMapping(m)"
                                [ngClass]="{ info: m == selectedMapping, grayText: !m.explicit }">
                                <td class="text-center">{{m.prefix}}</td>
                                <td class="text-center">{{m.namespace}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!--Imports-->
        <div class="card card-default vbox" style="margin-top: 5px;">
            <div class="card-header">
                <label style="flex: 1">Imports:</label>
                <div class="dropdown" ngbDropdown>
                    <button class="btn btn-light dropdown-toggle btn-xs" type="button" data-toggle="dropdown" ngbDropdownToggle [disabled]="!isAddImportAuthorized()">
                        Add import from <span class="fas fa-caret-down fa-sm"></span>
                    </button>
                    <div class="dropdown-menu" ngbDropdownMenu>
                        <a class="dropdown-item" (click)="importFromWeb()">Web</a>
                        <a class="dropdown-item" (click)="importFromWebToMirror()">Web to mirror</a>
                        <a class="dropdown-item" (click)="importFromLocalFile()">Local file</a>
                        <a class="dropdown-item" (click)="importFromOntologyMirror()">Ontology mirror</a>
                        <a class="dropdown-item" (click)="importFromDatasetCatalog()">Dataset Catalog</a>
                    </div>
                </div>
                <button class="btn btn-light btn-xs" (click)="openOntologyMirror()" style="margin-left: 4px;">
                    Ontology mirror
                </button>
            </div>
            <div class="card-body vbox">
                <import-tree [imports]="importTree" (nodeRemoved)="removeImport($event)" (update)="onInportTreeUpdate()"></import-tree>
            </div>
        </div>

    </div>

    <resource-view-editor *ngIf="baseUriRes" [resource]="baseUriRes" (update)="onOntologyUpdated()"
        style="margin-left: 5px;">
    </resource-view-editor>

</div>